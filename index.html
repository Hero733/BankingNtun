<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NTUN Banking - ธนาคารโรงเรียน</title>
    <link rel="stylesheet" href="style.css">
    <!-- แก้ไขลิงก์รูปภาพนี้หากไม่แสดงผล หรือใช้ placeholder image แทน -->
    <link href="https://fth1.com/uppic/10106510/news/10106510_0_20230515-160613.png" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body class="dark-theme">

    <div class="auth-container active" id="auth-container">
        <div class="auth-card">
            <div class="auth-header">
                
                <h2>ยินดีต้อนรับสู่ NTUN Banking</h2>
                <p id="auth-subtitle">เข้าสู่ระบบบัญชีนักเรียน</p>
            </div>

            <form id="login-form" class="auth-form active">
                <div class="form-group">
                    <label for="login-username">ชื่อผู้ใช้</label>
                    <input type="text" id="login-username" placeholder="กรอกชื่อผู้ใช้ของคุณ" required>
                </div>
                <div class="form-group password-group">
                    <label for="login-password">รหัสผ่าน</label>
                    <input type="password" id="login-password" placeholder="กรอกรหัสผ่านของคุณ" required>
                    <span class="password-toggle" data-target="login-password"><i class="fas fa-eye"></i></span>
                </div>
                <button type="submit" class="btn btn-primary"><i class="fas fa-sign-in-alt"></i> เข้าสู่ระบบ</button>
                <div id="login-message" class="message"></div>
            </form>

            <form id="register-form" class="auth-form">
                <div class="form-group">
                    <label for="register-username">ชื่อผู้ใช้</label>
                    <input type="text" id="register-username" placeholder="ตั้งชื่อผู้ใช้ของคุณ" required>
                </div>
                <div class="form-group password-group">
                    <label for="register-password">รหัสผ่าน</label>
                    <input type="password" id="register-password" placeholder="ตั้งรหัสผ่านของคุณ" required>
                    <span class="password-toggle" data-target="register-password"><i class="fas fa-eye"></i></span>
                </div>
                <div class="form-group password-group">
                    <label for="confirm-password">ยืนยันรหัสผ่าน</label>
                    <input type="password" id="confirm-password" placeholder="ยืนยันรหัสผ่านของคุณ" required>
                    <span class="password-toggle" data-target="confirm-password"><i class="fas fa-eye"></i></span>
                </div>
                <button type="submit" class="btn btn-primary"><i class="fas fa-user-plus"></i> สมัครสมาชิก</button>
                <div id="register-message" class="message"></div>
            </form>

            <div class="auth-switch">
                <p>ยังไม่มีบัญชีใช่ไหม? <a href="#" id="show-register">สมัครสมาชิกที่นี่</a></p>
                <p>มีบัญชีอยู่แล้วใช่ไหม? <a href="#" id="show-login">เข้าสู่ระบบที่นี่</a></p>
            </div>
        </div>
    </div>

    <div class="main-app-container" id="main-app-container">
        <aside class="sidebar">
            <div class="logo">NTUN Banking</div>
            <nav class="nav-menu">
                <ul>
                    <li data-section="dashboard" class="active"><a href="#"><i class="fas fa-home"></i> แดชบอร์ด</a></li>
                    <li data-section="deposit"><a href="#"><i class="fas fa-plus-circle"></i> ฝากเงิน</a></li>
                    <li data-section="withdraw"><a href="#"><i class="fas fa-minus-circle"></i> ถอนเงิน</a></li>
                    <li data-section="transfer"><a href="#"><i class="fas fa-exchange-alt"></i> โอนเงิน</a></li>
                    <li data-section="transactions"><a href="#"><i class="fas fa-history"></i> รายการธุรกรรม</a></li>
                    <li data-section="card"><a href="#"><i class="fas fa-credit-card"></i> บัตรธนาคาร</a></li>
                    <li data-section="settings"><a href="#"><i class="fas fa-cog"></i> การตั้งค่า</a></li>
                    <li><a href="#" class="logout-btn"><i class="fas fa-sign-out-alt"></i> ออกจากระบบ</a></li>
                </ul>
            </nav>
            <div class="theme-switch-container">
                <label class="theme-switch">
                    <input type="checkbox" id="theme-toggle">
                    <span class="slider round"></span>
                </label>
                <span class="theme-text">โหมดกลางคืน</span>
            </div>
        </aside>

        <main class="content">
            <header class="main-header">
                <h1 id="current-section-title">แดชบอร์ด</h1>
                <div class="header-actions">
                    <button class="btn btn-secondary refresh-balance-btn" id="refresh-balance-btn"><i class="fas fa-sync-alt"></i> อัปเดตยอดเงิน</button>
                    <span class="current-user-display"><i class="fas fa-user-circle"></i> <span id="current-username-display"></span></span>
                </div>
            </header>

            <section id="dashboard-section" class="content-section active">
                <div class="balance-summary card">
                    <div class="balance-info">
                        <h3>ยอดเงินปัจจุบัน</h3>
                        <p class="balance-amount" id="current-balance">0.00 NTUN</p>
                    </div>
                    <div class="balance-chart-container">
                        <canvas id="balance-chart"></canvas>
                    </div>
                </div>

                <div class="recent-transactions card">
                    <h3><i class="fas fa-history"></i> รายการธุรกรรมล่าสุด</h3>
                    <ul id="recent-transactions-list">
                        <!-- Recent transactions will be loaded here by JavaScript -->
                    </ul>
                    <button class="btn btn-secondary view-all-transactions-btn" data-section="transactions"><i class="fas fa-eye"></i> ดูรายการทั้งหมด</button>
                </div>
            </section>

            <section id="deposit-section" class="content-section">
                <div class="card">
                    <h2><i class="fas fa-plus-circle"></i> ฝากเงิน</h2>
                    <form id="deposit-form">
                        <div class="form-group">
                            <label for="deposit-amount">จำนวนเงิน (NTUN):</label>
                            <input type="number" id="deposit-amount" placeholder="กรอกจำนวนเงินที่ต้องการฝาก" step="0.01" min="0.01" required>
                        </div>
                        <button type="submit" class="btn btn-primary"><i class="fas fa-money-bill-wave"></i> ฝากเงิน</button>
                    </form>
                    <div id="deposit-message" class="message"></div>
                </div>
            </section>

            <section id="withdraw-section" class="content-section">
                <div class="card">
                    <h2><i class="fas fa-minus-circle"></i> ถอนเงิน</h2>
                    <form id="withdraw-form">
                        <div class="form-group">
                            <label for="withdraw-amount">จำนวนเงิน (NTUN):</label>
                            <input type="number" id="withdraw-amount" placeholder="กรอกจำนวนเงินที่ต้องการถอน" step="0.01" min="0.01" required>
                        </div>
                        <button type="submit" class="btn btn-primary"><i class="fas fa-money-bill-alt"></i> ถอนเงิน</button>
                    </form>
                    <div id="withdraw-message" class="message"></div>
                </div>
            </section>

            <section id="transfer-section" class="content-section">
                <div class="card">
                    <h2><i class="fas fa-exchange-alt"></i> โอนเงิน</h2>
                    <form id="transfer-form">
                        <div class="form-group">
                            <label for="transfer-recipient">ผู้รับ (ชื่อผู้ใช้):</label>
                            <input type="text" id="transfer-recipient" placeholder="ชื่อผู้ใช้ของผู้รับ" required>
                        </div>
                        <div class="form-group">
                            <label for="transfer-amount">จำนวนเงิน (NTUN):</label>
                            <input type="number" id="transfer-amount" placeholder="กรอกจำนวนเงินที่ต้องการโอน" step="0.01" min="0.01" required>
                        </div>
                        <button type="submit" class="btn btn-primary"><i class="fas fa-paper-plane"></i> โอนเงิน</button>
                    </form>
                    <div id="transfer-message" class="message"></div>
                </div>
            </section>

            <section id="transactions-section" class="content-section">
                <div class="card">
                    <h2><i class="fas fa-history"></i> รายการธุรกรรมทั้งหมด</h2>
                    <div class="filters">
                        <div class="form-group">
                            <label for="transaction-type-filter">ประเภท:</label>
                            <select id="transaction-type-filter">
                                <option value="all">ทั้งหมด</option>
                                <option value="deposit">ฝาก</option>
                                <option value="withdraw">ถอน</option>
                                <option value="transfer-out">โอนออก</option>
                                <option value="transfer-in">โอนเข้า</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="transaction-sort">จัดเรียงโดย:</label>
                            <select id="transaction-sort">
                                <option value="newest">ล่าสุด</option>
                                <option value="oldest">เก่าสุด</option>
                                <option value="amount-desc">จำนวน (มากไปน้อย)</option>
                                <option value="amount-asc">จำนวน (น้อยไปมาก)</option>
                            </select>
                        </div>
                        <button class="btn btn-secondary" id="apply-filters-btn"><i class="fas fa-filter"></i> ใช้ตัวกรอง</button>
                    </div>
                    <ul id="all-transactions-list" class="transaction-list">
                        <!-- All transactions will be loaded here by JavaScript -->
                    </ul>
                </div>
            </section>

            <section id="card-section" class="content-section">
                <div class="card">
                    <h2><i class="fas fa-credit-card"></i> บัตรธนาคาร NTUN Plus</h2>
                    <div class="bank-card-container">
                        <div class="bank-card" id="bank-card">
                            <div class="bank-card-front">
                                <div class="ntun-plus-logo">NTUN Plus</div>
                                <div class="chip"></div>
                                <div class="card-number" id="card-number"></div>
                                <div class="card-details">
                                    <div class="card-holder">
                                        <span class="label">Card Holder</span>
                                        <span class="card-holder-name" id="card-holder-name"></span>
                                    </div>
                                    <div class="card-expiry">
                                        <span class="label">Expires</span>
                                        <span class="card-expiry-date" id="card-expiry-date"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="bank-card-back">
                                <div class="magnetic-strip"></div>
                                <div class="signature-panel">
                                    <span class="cvv" id="card-cvv"></span>
                                </div>
                                <div class="card-type-logo"></div>
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-primary" id="generate-card-btn"><i class="fas fa-credit-card"></i> สร้าง/อัปเดตบัตร</button>
                    <div id="card-message" class="message"></div>
                </div>
            </section>

            <section id="settings-section" class="content-section">
                <div class="card">
                    <h2><i class="fas fa-cog"></i> การตั้งค่าบัญชี</h2>
                    <form id="account-settings-form">
                        <div class="form-group">
                            <label for="current-username-settings">ชื่อผู้ใช้:</label>
                            <input type="text" id="current-username-settings" disabled>
                        </div>
                        <div class="form-group">
                            <label for="dark-mode-toggle-settings">โหมดกลางคืน:</label>
                            <label class="theme-switch">
                                <input type="checkbox" id="dark-mode-toggle-settings">
                                <span class="slider round"></span>
                            </label>
                        </div>
                        <button type="submit" class="btn btn-primary" id="save-settings-btn"><i class="fas fa-save"></i> บันทึกการตั้งค่า</button>
                    </form>
                    <div id="settings-message" class="message"></div>
                </div>

                <div class="card change-password-card">
                    <h3><i class="fas fa-lock"></i> เปลี่ยนรหัสผ่าน</h3>
                    <form id="change-password-form">
                        <div class="form-group password-group">
                            <label for="current-password">รหัสผ่านปัจจุบัน:</label>
                            <input type="password" id="current-password" placeholder="กรอกรหัสผ่านปัจจุบัน">
                            <span class="password-toggle" data-target="current-password"><i class="fas fa-eye"></i></span>
                        </div>
                        <div class="form-group password-group">
                            <label for="new-password">รหัสผ่านใหม่:</label>
                            <input type="password" id="new-password" placeholder="กรอกรหัสผ่านใหม่">
                            <span class="password-toggle" data-target="new-password"><i class="fas fa-eye"></i></span>
                        </div>
                        <div class="form-group password-group">
                            <label for="confirm-new-password">ยืนยันรหัสผ่านใหม่:</label>
                            <input type="password" id="confirm-new-password" placeholder="ยืนยันรหัสผ่านใหม่">
                            <span class="password-toggle" data-target="confirm-new-password"><i class="fas fa-eye"></i></span>
                        </div>
                        <button type="submit" class="btn btn-primary" id="change-password-btn"><i class="fas fa-key"></i> เปลี่ยนรหัสผ่าน</button>
                    </form>

                <div class="advanced-settings card">
                    <h3><i class="fas fa-exclamation-triangle"></i> เขตอันตราย</h3>
                    <button class="btn btn-danger" id="reset-data"><i class="fas fa-trash-alt"></i> รีเซ็ตข้อมูลทั้งหมด</button>
                    <p class="reset-warning">นี่จะล้างยอดเงิน, รายการธุรกรรม, และข้อมูลผู้ใช้ทั้งหมด. การดำเนินการนี้ไม่สามารถย้อนกลับได้!</p>
                </div>
                <div id="settings-message" class="message"></div>
            </div>

        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
    
    <!-- Firebase SDK (v9+) - ใช้ compat libraries เพื่อให้เข้ากันได้กับโค้ด script.js เดิม -->
    <!-- ต้องโหลด firebase-app-compat.js ก่อนเสมอ -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <!-- โหลด Authentication SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <!-- โหลด Firestore SDK (สำหรับฐานข้อมูล) -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <!-- โหลด Analytics SDK (ถ้าต้องการใช้) -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-analytics-compat.js"></script>

    <script>
    // Your web app's Firebase configuration (คัดลอกมาจาก Firebase Console ของคุณ)
    const firebaseConfig = {
      apiKey: "AIzaSyCO8dvhPNqpNNPiy_h7dAHtld73iAR03SA",
      authDomain: "bankingntun.firebaseapp.com",
      projectId: "bankingntun",
      storageBucket: "bankingntun.firebasestorage.app",
      messagingSenderId: "37252401627",
      appId: "1:37252401627:web:8dd97768780b0dac81bffe",
      measurementId: "G-DZ45WV3WYP" // ถ้าคุณเปิด Analytics
    };

    // Initialize Firebase app
    const app = firebase.initializeApp(firebaseConfig);

    // Initialize Firebase services (สามารถเรียกใช้ได้ทั่ว script.js)
    const auth = firebase.auth(); // สำหรับ Authentication
    const db = firebase.firestore(); // สำหรับ Cloud Firestore (ฐานข้อมูล)
    const analytics = firebase.analytics(); // สำหรับ Analytics (ถ้าต้องการใช้)

    // สามารถ console.log เพื่อตรวจสอบว่าเชื่อมต่อสำเร็จ
    console.log("Firebase initialized:", app);
    console.log("Auth service:", auth);
    console.log("Firestore service:", db);
    </script>

    <script src="script.js"></script> <!-- ไฟล์ script.js เดิมของคุณ -->

</body>
</html>
